$balloon-pointer-width: 12px
$balloon-pointer-height: 10px

@mixin chat-shadow
  -webkit-filter: drop-shadow(3px 3px 1px $chat-msg-shadow)
  filter: drop-shadow(2px 2px 1px $chat-msg-shadow)

.chat
  .chat-messages
    padding: 0
    list-style-type: none
    .chat-message
      display: flex
      flex-direction: row
      .avatar
        float: left
        margin-right: 10px
      .chat-balloon
        display: flex
        flex-flow: row wrap
        width: 100%
        border-radius: 5px
        border-top-left-radius: 0
        @include chat-shadow
        padding: .36em .71em .71em .71em
        margin: 2px $balloon-pointer-width
        position: relative
        &::before
          content: " "
          position: absolute
          top: 0%
          border-style: solid
          width: 0
          height: 0
          border-style: solid
          right: 100%
          border-width: 0 $balloon-pointer-width $balloon-pointer-height 0
      .chat-message-sender
        font-weight: bold
        margin-bottom: 2px
        flex: 1 auto
        &.color-1
          color: $chat-sender-color-1
        &.color-2
          color: $chat-sender-color-2
        &.color-3
          color: $chat-sender-color-3
        &.color-4
          color: $chat-sender-color-4
        &.color-5
          color: $chat-sender-color-5
        &.color-6
          color: $chat-sender-color-6
      .chat-message-time
        color: $chat-message-time-color
        flex: 1 auto
        font-size: .86em
        text-align: right
        padding-top: 0.26em
      .chat-message-text
        @extend .break-lines
        flex: 1 100%
      .chat-message-file
        flex: 1 100%
        img
          max-height: 200px
          max-width: 100%
        + .chat-message-text
          display: none

      &.their .chat-balloon
        background-color: $chat-their-color
        &::before
          border-color: transparent $chat-their-color transparent transparent
      &.mine
        .chat-balloon
          background-color: $chat-mine-color
          &::before
            border-color: transparent $chat-mine-color transparent transparent

      @media (max-width: $screen-sm-max)
        .chat-balloon
          width: inherit
        &.their .chat-balloon
          margin-right: 10%
        &.mine
          justify-content: flex-end
          .avatar
            display: none
          .chat-balloon
            background-color: $chat-mine-color
            border-top-left-radius: 5px
            border-top-right-radius: 0
            margin-left: 10%
            &::before
              right: -$balloon-pointer-width
              border-width: $balloon-pointer-height $balloon-pointer-width 0 0
              border-color: $chat-mine-color transparent transparent transparent
          .chat-message-sender
            display: none
          .chat-message-time
            text-align: left
            padding-right: 15px
          .chat-message-text
            flex: 1 auto
    .new-messages
      display: flex
      flex-direction: row
      justify-content: center
      div
        @extend .alert
        @extend .text-center
        @extend .text-uppercase
        @extend .overflow-ellipsis
        display: inline-block
        background-color: $other-grey
        border-radius: 5px
        padding: 5px
        box-shadow: 3px 3px 1px $chat-msg-shadow
    .day-change
      @extend .new-messages
  .chat-send
    .form-group
      padding: 0
      margin: 0
  .chat-send-bar
    background: $chat-send-bar-background-color
    textarea
      padding-top: 0.71em
      padding-left: 0.71em
      background-image: none
      font-size: 1.14em
      resize: none
      border: 0
      @include placeholder
    textarea:focus
      background-image: none
    textarea, .input-group-addon
      border-bottom: 0px
    .btn
      font-size: 1.21em
      margin: 0
      padding: 0
      &.ng-animate
        transition: 0s
    .popover
      color: inherit
      background: $chat-send-bar-background-color
      font-size: 1.3em
      max-width: 100%
#chatEmojisBtn > a
  display: none
  @media (min-width: $screen-lg-min)
    display: block
.emoji-picker-item
  padding: 3px
  line-height: 2em
