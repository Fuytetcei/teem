<div class="pad-wrapper" ng-class="pad.editing ? 'project-pad-editing' : ''">
  <div class="pad no-pointer" ng-click="editOn()"
  ngf-drop="widget('img', $file)" ngf-fix-orientation="true" ngf-drag-over-class="'pad-dragover'" >
    <md-content>
      <div class="pad-toolbar" md-colors="{background: 'background'}" ng-if="pad.editing" sticky>
        <section layout="row" layout-align="start center" layout-wrap>
          <md-button class="md-icon-button" ng-click="linkModal.add($event)" aria-label="{{'pad.tooltip.link' | translate}}">
            <md-icon>link</md-icon>
          </md-button>
          <md-button class="md-icon-button" ng-click="widget('img')" aria-label="{{'pad.tooltip.img' | translate}}">
            <md-icon>image</md-icon>
          </md-button>
          <md-button class="md-icon-button" ng-click="widget('need')" aria-label="{{'pad.tooltip.need' | translate}}">
            <md-icon>check_box</md-icon>
          </md-button>
          <md-divider></md-divider>
          <md-button class="md-icon-button" ng-repeat="(btn, isActive) in buttons" ng-click="annotate(btn)" ng-class="{'md-raised': isActive}" aria-label="{{'pad.tooltip.'+btn | translate}}">
            <md-icon>{{btn}}</md-icon>
          </md-button>
          <md-button class="md-icon-button" ng-click="clearFormat()" aria-label="{{'pad.tooltip.clearFormat' | translate}}">
            <md-icon>format_clear</md-icon>
          </md-button>
        </section>
      </div>
      <div
        class="swellrt-editor"
        dragover-text="{{'picture.dropover' | translate}}"
        swellrt-editor-on-ready="padReady"
        swellrt-editor-on-create="padCreate"
        swellrt-editor-widgets="padWidgets"
        swellrt-editor-annotations="padAnnotations"
        editable="{{project.isParticipant()}}"
        ng-model="project.pad"
        placeholder="{{ 'pad.placeholder' | translate }}"
        block-edit="{{!project.isParticipant()}}">
      </div>
      <div id="link-modal" class="well bs-component" ng-if="linkModal.show" ui-outer-click="linkModal.show = false; linkModal.edit = false">
        <div ng-if="linkModal.annotation.value && !linkModal.edit">
          <a href="{{linkModal.link}}" target="_blank">{{linkModal.link}}</a>
           - <a ng-click="linkModal.edit = true; $event.stopPropagation()" translate>pad.link.change</a>
           | <a ng-click="linkModal.clear()" translate>pad.link.delete</a>
        </div>
        <form class="form-horizontal" ng-submit="linkModal.change()" ng-if="!linkModal.annotation.value || linkModal.edit">
          <fieldset>
            <div class="form-group">
              <label class="col-md-2 control-label" translate>pad.link.text</label>
              <div class="col-md-10">
                <input type="text" class="form-control" ng-model="linkModal.text">
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-2 control-label" translate>pad.link.link</label>
              <div class="col-md-10">
                <input type="text" class="form-control" ng-model="linkModal.link">
              </div>
            </div>
            <button class="btn btn-primary pull-right" translate>pad.link.button</button>
          </fieldset>
        </form>
      </div>
    </md-content>
  </div>
</div>
