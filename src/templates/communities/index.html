<div ui-content-for="nav-title">
  <div class="overflow-ellipsis" translate>community.index.title</div>
</div>

<div class="scrollable-content">
  <div id="communities" class="section communities">
    <div class="community-search-and-create row">
      <div class="col-md-6 community-search">
        <a class="btn btn-primary btn-block btn-lg" ng-if="! searching && ! creating" ng-click="search()" overflow-ellipsis>
          <span translate>community.search.button</span>
        </a>
        <div class="input-group input-group-lg" ng-show="searching || creating">
          <span class="input-group-addon"><i class="fa fa-search fa-fw" ng-if="searching"></i></span>
          <input type="text" class="form-control" ng-model="newCommunityName.name" translate placeholder="{{ 'community.search.placeholder' | translate }}">
        </div>
      </div>
      <div class="community-create col-md-6">
        <a class="btn btn-primary btn-block btn-lg" ng-if="! newCommunityName.name" ng-click="new_()" overflow-ellipsis>
          <span translate>community.new.button</span>
        </a>
        <a class="btn btn-primary btn-block btn-lg community-create-btn" ng-if="newCommunityName.name" ng-click="create(newCommunityName.name)" overflow-ellipsis>
          <span translate translate-values="{ name: '{{newCommunityName.name}}' }">community.create.button</span>
        </a>
      </div>
    </div>

    <div class="community-list list-group">
      <div class="community-item list-group-item"
           ng-repeat="community in communities | toArray:true | orderBy:'-numProjects || 0' | filter:newCommunityName:strict"
           ng-click="showProjects(community.id)">
        <h4 class="community-title" ng-bind-html="community.name | highlight:newCommunityName.name">
        </h4>
        <div>
          <span class="community-projects-number">{{community.numProjects || 0}}</span>
          <span translate>community.project.number</span>
        </div>
      </div>
    </div>
  </div>
</div>
